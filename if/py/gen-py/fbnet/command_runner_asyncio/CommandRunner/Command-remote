#!/usr/bin/env python
#
# Autogenerated by Thrift
#
# DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
#  @generated
#

from __future__ import print_function
from __future__ import absolute_import

import os
import sys

if (not sys.argv[0].endswith("par") and
    not sys.argv[0].endswith("xar") and
    os.getenv('PAR_UNPACK_TMP') == None):

    f = open(sys.argv[0], "r")

    f.readline() # This will be #!/bin/bash
    line = f.readline()
    f.close()

    # The par generator tool always has '# This par was made' as the
    # second line. See fbcode/tools/make_par/make_par.py
    if (not line.startswith('# This par was made')):
        print("""WARNING
        You are trying to run *-remote.py which is
        incorrect as the paths are not set up correctly.
        Instead, you should generate your thrift file with
        thrift_library and then run the resulting
        *-remote.par.
        For more information, please read
        http://fburl.com/python-remotes""")
        exit()

from . import Command
from . import ttypes

from thrift.util.remote import Function
from thrift.remote import Remote

FUNCTIONS = {
    'run': Function('run', 'Command', 'CommandResult', [('string', 'command', 'string'), ('Device', 'device', 'Device'), ('i32', 'timeout', 'i32'), ('i32', 'open_timeout', 'i32'), ('string', 'client_ip', 'string'), ('string', 'client_port', 'string')]),
    'bulk_run': Function('bulk_run', 'Command', 'map<string, list<CommandResult>>', [('map<Device, list<string>>', 'device_to_commands', 'map<Device, list<string>>'), ('i32', 'timeout', 'i32'), ('i32', 'open_timeout', 'i32'), ('string', 'client_ip', 'string'), ('string', 'client_port', 'string')]),
    'bulk_run_local': Function('bulk_run_local', 'Command', 'map<string, list<CommandResult>>', [('map<Device, list<string>>', 'device_to_commands', 'map<Device, list<string>>'), ('i32', 'timeout', 'i32'), ('i32', 'open_timeout', 'i32'), ('string', 'client_ip', 'string'), ('string', 'client_port', 'string')]),
    'open_session': Function('open_session', 'Command', 'Session', [('Device', 'device', 'Device'), ('i32', 'open_timeout', 'i32'), ('i32', 'idle_timeout', 'i32'), ('string', 'client_ip', 'string'), ('string', 'client_port', 'string')]),
    'run_session': Function('run_session', 'Command', 'CommandResult', [('Session', 'session', 'Session'), ('string', 'command', 'string'), ('i32', 'timeout', 'i32'), ('string', 'client_ip', 'string'), ('string', 'client_port', 'string')]),
    'close_session': Function('close_session', 'Command', 'void', [('Session', 'session', 'Session'), ('string', 'client_ip', 'string'), ('string', 'client_port', 'string')]),
    'getName': Function('getName', 'FacebookService', 'string', []),
    'getVersion': Function('getVersion', 'FacebookService', 'string', []),
    'getStatus': Function('getStatus', 'FacebookService', 'fb303.fb_status', []),
    'getStatusDetails': Function('getStatusDetails', 'FacebookService', 'string', []),
    'getCounters': Function('getCounters', 'FacebookService', 'map<string, i64>', []),
    'getRegexCounters': Function('getRegexCounters', 'FacebookService', 'map<string, i64>', [('string', 'regex', 'string')]),
    'getRegexCountersCompressed': Function('getRegexCountersCompressed', 'FacebookService', 'string', [('string', 'regex', 'string')]),
    'getCountersCompressed': Function('getCountersCompressed', 'FacebookService', 'string', []),
    'getSelectedCounters': Function('getSelectedCounters', 'FacebookService', 'map<string, i64>', [('list<string>', 'keys', 'list<string>')]),
    'getCounter': Function('getCounter', 'FacebookService', 'i64', [('string', 'key', 'string')]),
    'getExportedValues': Function('getExportedValues', 'FacebookService', 'map<string, string>', []),
    'getSelectedExportedValues': Function('getSelectedExportedValues', 'FacebookService', 'map<string, string>', [('list<string>', 'keys', 'list<string>')]),
    'getRegexExportedValues': Function('getRegexExportedValues', 'FacebookService', 'map<string, string>', [('string', 'regex', 'string')]),
    'getExportedValue': Function('getExportedValue', 'FacebookService', 'string', [('string', 'key', 'string')]),
    'setOption': Function('setOption', 'FacebookService', 'void', [('string', 'key', 'string'), ('string', 'value', 'string')]),
    'getOption': Function('getOption', 'FacebookService', 'string', [('string', 'key', 'string')]),
    'getOptions': Function('getOptions', 'FacebookService', 'map<string, string>', []),
    'getCpuProfile': Function('getCpuProfile', 'FacebookService', 'string', [('i32', 'profileDurationInSec', 'i32')]),
    'getCpuProfileWithOptions': Function('getCpuProfileWithOptions', 'FacebookService', 'string', [('fb303.CpuProfileOptions', 'options', 'fb303.CpuProfileOptions')]),
    'getHeapProfile': Function('getHeapProfile', 'FacebookService', 'string', [('i32', 'profileDurationInSec', 'i32')]),
    'getContentionProfile': Function('getContentionProfile', 'FacebookService', 'string', [('i32', 'profileDurationInSec', 'i32')]),
    'getWallTimeProfile': Function('getWallTimeProfile', 'FacebookService', 'string', [('i32', 'profileDurationInSec', 'i32')]),
    'getMemoryUsage': Function('getMemoryUsage', 'FacebookService', 'i64', []),
    'getLoad': Function('getLoad', 'FacebookService', 'double', []),
    'getPid': Function('getPid', 'FacebookService', 'i64', []),
    'getCommandLine': Function('getCommandLine', 'FacebookService', 'string', []),
    'aliveSince': Function('aliveSince', 'FacebookService', 'i64', []),
    'reinitialize': Function('reinitialize', 'FacebookService', None, []),
    'shutdown': Function('shutdown', 'FacebookService', None, []),
    'translateFrames': Function('translateFrames', 'FacebookService', 'list<string>', [('list<i64>', 'pointers', 'list<i64>')]),
    'getPcapLoggingConfig': Function('getPcapLoggingConfig', 'FacebookService', 'fb303.PcapLoggingConfig', []),
    'setPcapLoggingConfig': Function('setPcapLoggingConfig', 'FacebookService', 'void', [('fb303.PcapLoggingConfig', 'config', 'fb303.PcapLoggingConfig')]),
}

SERVICE_NAMES = ['Command', 'FacebookService', ]

if __name__ == '__main__':
    Remote.run(FUNCTIONS, SERVICE_NAMES, Command, ttypes, sys.argv, default_port=9090)
